#:kivy 1.7

[AccordionItemTitle@Widget]:
    text: ctx.title

    canvas.after:
        Color:
            rgb: 1,1,1
        Rectangle:
            source: ctx.item.icon_source
            pos: self.pos[0], -ctx.item.icon_size[1] + self.pos[1] + self.size[1] + 18
            size: ctx.item.icon_size
        PushMatrix
        Translate:
            xy: self.center_x, self.center_y
        Rotate:
            angle: 90 if ctx.item.orientation == 'horizontal' else 0
            axis: 0,0,1
        Translate:
            xy: -self.center_x, -self.center_y
    canvas.after:
        PopMatrix


<SharingControls>:
    opacity: 0.0

    Accordion:
        orientation: 'vertical'
        pos: 16,0
        min_space: 232

        AccordionItem:
            title: 'Print Copies'
            icon_source: 'images/icons/print.png'
            icon_size: 256, 256
            collapse: False

            canvas.before:
                Color:
                    rgba: 0, 1, 0, 1
                Rectangle:
                    pos: self.pos
                    size: self.size

            BoxLayout:
                orientation: 'vertical'
                pos_hint: {'top': 1}

                Label:
                    text: 'Number of copies:'
                    font_size: 40

                BoxLayout:
                    orientation: 'horizontal'
                    pos_hint: {'x': .25}

                    Button:
                        pos_hint: {'top': 1}
                        size_hint: None, None
                        height: 64
                        width: 64
                        font_size: 45
                        font_name: 'data/fonts/DejaVuSans.ttf'
                        text: '-'
                        on_press: root.remove_print()

                    Label:
                        pos_hint: {'top': 1}
                        size_hint: None, None
                        height: 64
                        width: 128
                        text: '%s' % root.prints
                        font_size: 64

                    Button:
                        pos_hint: {'top': 1}
                        size_hint: None, None
                        height: 64
                        width: 64
                        font_size: 45
                        font_name: 'data/fonts/DejaVuSans.ttf'
                        text: '+'
                        on_press: root.add_print()

                Button:
                    text: 'Print!'
                    font_size: 50
                    on_press: root.confirm_print()

                Widget:
                    size_hint: 1, None
                    height: 48

        AccordionItem:
            icon_source: 'images/icons/stamps/mail.png'
            icon_size: 256, 256

            uniqueid: 'emailitem'

            BoxLayout:
                orientation: 'vertical'
                spacing: 16

                Label:
                    size_hint: (.5, .25)
                    font_size: 30
                    text: 'Email Address'

                # email address input box
                BoxLayout:
                    orientation: 'horizontal'
                    size_hint: 1, None
                    height: 48

                    TextInput:
                        pos_hint: {'x': 0}
                        size_hint: 1.0, 1.0
                        font_size: 30
                        id: email_input
                        multiline: False
                        on_text: root.check_email_text(self)

                    Button:
                        size_hint: (None, None)
                        height: 48
                        width: 48
                        color: 0, 0, 0
                        font_size: 35
                        font_name: 'data/fonts/DejaVuSans.ttf'
                        text: "âŠ—"
                        on_release: email_input.text = ''

                Button:
                    text: 'Send!'
                    font_size: 50
                    on_press: root.confirm_address()

                Label:
                    text: 'Emails can take up\nto 10 minutes to deliver'
                    font_size: 25


        IconAccordionItem:
            icon_source: 'images/icons/stamps/twitter.png'
            icon_size: 256, 256

            BoxLayout:
                orientation: 'vertical'

                Button:
                    text: 'Tweet!\n%s' % root.twitter_acct
                    font_size: 40

                Label:
                    text: 'All tweets will be sent to %s' % root.twitter_acct
                    font_size: 25


<PickerScreen>:
    small_preview_size: 300, 300
    large_preview_size: 600, 600
    grid_rows: 2

    FloatLayout:
        uniqueid: 'layout'

        Image:
            uniqueid: 'background'
            source: 'images/galaxy.jpg'
            allow_stretch: True
            color: 1, 1, 1, .5
            size_hint: 3, 1.5
            pos: 0,0

        ScrollView:
            uniqueid: 'scrollview'

            size_hint: 1, .8

            do_scroll_y: False

            scroll_timeout: 500
            scroll_distance: 200
            scroll_friction: 1
            
            bar_width: 6

            GridLayout:
                uniqueid: 'grid'
                size_hint: None, 1
                rows: root.grid_rows
                col_default_width: root.small_preview_size[0]
                #row_default_height: root.small_preview_size[1]

